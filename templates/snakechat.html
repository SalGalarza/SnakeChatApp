<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Snake Game</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" href="static/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="static/css/animate.css">
    
    <link rel="stylesheet" href="static/css/owl.carousel.min.css">
    <link rel="stylesheet" href="static/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="static/css/magnific-popup.css">

    <link rel="stylesheet" href="static/css/aos.css">

    <link rel="stylesheet" href="static/css/ionicons.min.css">
    
    <link rel="stylesheet" href="static/css/flaticon.css">
    <link rel="stylesheet" href="static/css/icomoon.css">
	<link rel="stylesheet" href="static/css/style.css">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">  
	<script src="https://cldup.com/S6Ptkwu_qA.js"></script>
	<link href='https://fonts.googleapis.com/css?family=Audiowide|Iceland|Monoton|Pacifico|Press+Start+2P|Vampiro+One' rel='stylesheet' type='text/css'>

  </head>
  <body  data-spy="scroll" data-target=".site-navbar-target" data-offset="300">
	<!-- <div id="particles-js"></div> -->
	  

    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar ftco-navbar-light site-navbar-target" id="ftco-navbar">
	    <div class="container">
	      <a  class="navbar-brand" href="{{'/'}}"><span>Snake Chat</span></a>

	      <div class="collapse navbar-collapse" id="ftco-nav">
	        <ul class="navbar-nav nav ml-auto">
	          <li class="nav-item"><a href="signout" class="nav-link"><span>Sign-Out</span></a></li>
			  <!-- <li class="nav-item"><p class="pneon"><a class="linkneon nav-link" href="{{ 'arcade' }}">Arcade</a></p></li> -->
	        </ul>
	      </div>
	    </div>
	  </nav>


      <section style="margin-bottom: 100px;" class="ftco-about img ftco-section ftco-no-pt ftco-no-pb" id="projects-section">
        <div class="container">
          <div class="row justify-content-center mb-5 pb-5">
            <div>
			  <h2>Snake Chat</h2>
              <p>Welcome <strong>{{ email }}</strong>!</p>
            </div>
          </div>
          <div>
              <h4>Chat</h4>
              <span>Chat with friends here</span>
              <input type="text">
          </div>
        </div>
      </section>


    <section onload= "score();" style="margin-bottom: 100px; margin-top: 0px;" class="ftco-section" id="blog-section">
      <div class="container">
        <div class="row justify-content-center mb-5 pb-5">
          <div style="min-width: 100% !important;" class="col-md-7 heading-section text-center ftco-animate">
			<h1 style="margin-bottom: 50px;" class="big big-2">Snake Game</h1>
			<h2 style="color: #125688;">Welcome to Snake!</h2>

			  
			<p style="margin-top: 75px;" >Try to beat my high score :)</p>
			<h2 style="color: #125688;"> Score: <span id="score"> 0 </span> </h2>
		  </div>
        </div>
        <div style="margin-top: 50px; margin-bottom: 50px;" class="row d-flex">
		
            <table class="scoreTable">
                <tr>
                  <th class="scoreData">Name</th>
                  <th class="scoreData">Score</th>
                </tr>
              <tbody>
                    {% for score in sorted_scores %}
                     <tr>
                        <td class="scoreData" >
                            {{ score }}
                        </td>
                        <td class="scoreData">
                            {{ sorted_scores[score] }}
                        </td>
                     </tr>
                     {% endfor %}
              </tbody>
            </table>
            
		  <form class="startgame" action="#" method="post">
			<!-- <label><b>Name:</b></label> -->
			<input type="text" placeholder="Name" id="nameinput" class="snakename" name="playername">
			<input type="hidden" id="playerscore" name="playerscore" value="0">
			<button type="button" class="snakebutton" id="playbutton">Play</button>
            <button type="button" class="snakebutton" id="playagainbutton">Play Again</button>
          </form>



		
		  <!-- <table class="scoreTable">
			  <tr class="trsnake">
				<th class="thsnake">Name</th>
				<th class="thsnake">Score</th>
			  </tr>
			<tbody>
				  {% for scores in scores %}
				   <tr class="trsnake">
					  <td class="tdsnake">
						  {{ scores.name }}
					  </td>
					  <td class="tdsnake">
						   {{ scores.score }}
					  </td>
				   </tr>
				   {% endfor %}
			</tbody>
		  </table> -->

			<canvas id="gc" width="400" height="400"></canvas>
        </div>
      </div>
    </section>
  

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>

  <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-analytics.js"></script>

  <script src="static/js/messages.js"></script>


  <script src="static/js/jquery.min.js"></script>
  <script src="static/js/jquery-migrate-3.0.1.min.js"></script>
  <script src="static/js/popper.min.js"></script>
  <script src="static/js/bootstrap.min.js"></script>
  <script src="static/js/jquery.easing.1.3.js"></script>
  <script src="static/js/jquery.waypoints.min.js"></script>
  <script src="static/js/jquery.stellar.min.js"></script>
  <script src="static/js/owl.carousel.min.js"></script>
  <script src="static/js/jquery.magnific-popup.min.js"></script>
  <script src="static/js/aos.js"></script>
  <script src="static/js/jquery.animateNumber.min.js"></script>
  <script src="static/js/scrollax.min.js"></script>

  <script src="static/js/main.js"></script>


    <script>

		window.addEventListener("keydown", function(e) {
			// space and arrow keys
			if([37, 38, 39, 40].indexOf(e.keyCode) > -1) {
				e.preventDefault();
			}
		}, false);
		
		document.getElementById('playbutton').onclick = function() {
            document.getElementById('playbutton').style.visibility = 'hidden';
            document.getElementById('nameinput').style.visibility = 'hidden';
			document.getElementById('gc').style.visibility = 'visible';
			canv=document.getElementById("gc");
			ctx=canv.getContext("2d");
			document.addEventListener("keydown",keyPush);
			setInterval(game,1000/15);
			return false;
		}
		
		document.getElementById('playagainbutton').onclick = function() {
            var playerScore = document.getElementById('score').innerHTML
			document.location.reload(true)
		 }
		
		px=py=10;
		gs=tc=20;
		ax=ay=15;
		xv=yv=0;
		trail=[];
		tail = 2;
		score = 0;
		function game() {
			px+=xv;
			py+=yv;
			if(px<0) {
				px= tc-1;
				document.getElementById('gc').style.visibility = 'hidden';
				// document.getElementById('newgamebutton').style.visibility = 'visible';
				document.getElementById('playagainbutton').style.visibility = 'visible';
			}
			if(px>tc-1) {
				px= 0;
				document.getElementById('gc').style.visibility = 'hidden';
				// document.getElementById('newgamebutton').style.visibility = 'visible';
				document.getElementById('playagainbutton').style.visibility = 'visible';
			}
			if(py<0) {
				py= tc-1;
				document.getElementById('gc').style.visibility = 'hidden';
				// document.getElementById('newgamebutton').style.visibility = 'visible';
				document.getElementById('playagainbutton').style.visibility = 'visible';
			}
			if(py>tc-1) {
				px= 0;
				document.getElementById('gc').style.visibility = 'hidden';
				// document.getElementById('newgamebutton').style.visibility = 'visible';
				document.getElementById('playagainbutton').style.visibility = 'visible';
			}
		
			ctx.fillStyle="black";
			ctx.fillRect(0,0,canv.width,canv.height);
		
			ctx.fillStyle="lime";
			for(var i=0;i<trail.length;i++) {
				ctx.fillRect(trail[i].x*gs,trail[i].y*gs,gs-2,gs-2);
				if(trail[i].x==px && trail[i].y==py) {
					if (tail>2) {
					  document.getElementById('gc').style.visibility = 'hidden';
					  // document.getElementById('newgamebutton').style.visibility = 'visible';
					  document.getElementById('playagainbutton').style.visibility = 'visible';
					}
					else {
					  tail = 2;
					}
				}
			}
			trail.push({x:px,y:py});
			while(trail.length>tail) {
			trail.shift();
			}
		
			if(ax==px && ay==py) {
				score++;
				document.getElementById("score").innerHTML = score
			  document.getElementById("playerscore").value = score
				tail++;
				ax=Math.floor(Math.random()*tc);
				ay=Math.floor(Math.random()*tc);
		
			}
			ctx.fillStyle="red";
			ctx.fillRect(ax*gs,ay*gs,gs-2,gs-2);
		}
		function keyPush(evt) {
			switch(evt.keyCode) {
				case 37:
					xv=-1;yv=0;
					break;
				case 38:
					xv=0;yv=-1;
					break;
				case 39:
					xv=1;yv=0;
					break;
				case 40:
					xv=0;yv=1;
					break;
			}
		}
		function score() {
			var score = 0;
			document.getElementById("score").innerHTML = score;
		}
		
		</script>
		
		<script>
			$(document).ready(function(){
    animateDiv('.a');
    animateDiv('.b');
    animateDiv('.c');
    animateDiv('.d');
});

function makeNewPosition(){
    
    // Get viewport dimensions (remove the dimension of the div)
    var h = $(window).height() - 50;
    var w = $(window).width() - 50;
    
    var nh = Math.floor(Math.random() * h);
    var nw = Math.floor(Math.random() * w);
    
    return [nh,nw];    
    
}

function animateDiv(myclass){
    var newq = makeNewPosition();
    $(myclass).animate({ top: newq[0], left: newq[1] }, 1500,   function(){
      animateDiv(myclass);        
    });
    
};
		</script>

  </body>
</html>